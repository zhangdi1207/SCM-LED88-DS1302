C51 COMPILER V8.06   LED                                                                   01/31/2018 11:10:31 PAGE 1   


C51 COMPILER V8.06, COMPILATION OF MODULE LED
OBJECT MODULE PLACED IN led.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE led.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include"head.h"
   2          
   3          
   4          /*
   5          //列74HC595的数据线
   6          sbit ColumnData = P1^0;
   7          sbit ColumnSHCP = P1^1;
   8          sbit ColumnSTCP = P1^2;
   9          
  10          //行、列芯片的片选
  11          sbit RCChannelData = P3^3;
  12          sbit RCChannelSHCP = P3^6;
  13          sbit RCChannelSTCP = P3^7;
  14          
  15          //行74HC138的数据
  16          sbit RowData0 = P3^0;
  17          sbit RowData1 = P3^1;
  18          sbit RowData2 = P3^2;
  19          
  20          //行、列选择按钮
  21          sbit RowSelect = P3^4;     
  22          //sbit RowSelect = P5^4;                 //stc15f408as 16脚
  23          sbit ColumnSelect = P1^7;
  24          //sbit ColumnSelect = P5^5;              //stc15f408as 16脚
  25          
  26          */
  27          
  28          void chipSelect( uchar row,uchar column)
  29          {
  30   1              uchar i,dat;
  31   1              dat= ~((0x01<<(row/8)) + (0x10<<(column/8))); 
  32   1              for(i=0;i<8;i++)
  33   1              {
  34   2                      RCChannelSHCP=0;
  35   2                      RCChannelData=dat&0x80;
  36   2                      dat=dat<<1;
  37   2                      RCChannelSHCP=1;
  38   2              }
  39   1              RCChannelData=0;
  40   1              RCChannelSTCP=0;
  41   1              nop();
  42   1              nop();
  43   1              RCChannelSTCP=1;
  44   1      
  45   1      }
  46          
  47          void columnSelect(uchar dat)
  48          {
  49   1              uchar i;
  50   1              for(i=0;i<8;i++)
  51   1              {
  52   2                      ColumnSHCP=0;
  53   2                      ColumnData=dat&0x80;
  54   2                      dat=dat<<1;
  55   2                      ColumnSHCP=1;
C51 COMPILER V8.06   LED                                                                   01/31/2018 11:10:31 PAGE 2   

  56   2              }
  57   1              ColumnSTCP=0;
  58   1              nop();
  59   1              nop();
  60   1              ColumnSTCP=1;   
  61   1      }
  62          
  63          void rowSelect(uchar signalrow)
  64          {
  65   1              RowData0 =signalrow%2;
  66   1              RowData1 =(signalrow/2)%2;
  67   1              RowData2 =(signalrow/4)%2;
  68   1      }
  69          
  70          
  71          void show(uint signalMonth)
  72          {
  73   1              uchar temp; 
  74   1              uint myMonth;
  75   1              myMonth=signalMonth;
  76   1              chipSelect(myMonth/32,myMonth%32);
  77   1              temp=0x01<<((myMonth%32)%8);
  78   1              columnSelect(temp);
  79   1              temp=(myMonth/32)%8;
  80   1              rowSelect(temp);
  81   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    170    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
